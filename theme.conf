# vim: set ft=tmux:

# Catppuccin config
set -g @catppuccin_flavor 'mocha'

# Menu and pane settings
# Uncomment and customize the menu selected style if needed
set -g @catppuccin_pane_status_enabled "yes"
set -g @catppuccin_pane_status_style "custom"
# Uncomment and customize the pane separators if needed
set -g @catppuccin_pane_default_fill "all"
set -g @catppuccin_pane_border_status "on"
# Uncomment and customize the pane border styles if needed

# Window settings
set -g @catppuccin_window_status_style "custom"
set -g @catppuccin_window_left_separator "#[reverse]#[noreverse]"
set -g @catppuccin_window_middle_separator ""
set -g @catppuccin_window_right_separator "#[reverse]#[noreverse]"
set -g @catppuccin_window_fill "all"
set -g @catppuccin_window_number "#I | "
set -g @catppuccin_window_text_color "#{@thm_base}"
set -g @catppuccin_window_number_color "#{@thm_overlay_1}"
set -g @catppuccin_window_number_position "left"
set -g @catppuccin_window_text "#T#[reverse]"
set -g @catppuccin_window_current_fill "all"
set -g @catppuccin_window_current_number "#I | "
set -g @catppuccin_window_current_text_color "#{@thm_base}"
set -g @catppuccin_window_current_number_color "#{@thm_mauve}"
# Uncomment and customize the current window text if needed
set -g @catppuccin_window_current_text "#W#[reverse]"

# Status settings
set -g status-position top
set -g @catppuccin_status_background "none"
set -g @catppuccin_status_default "no"
set -g @catppuccin_status_connect_separator "no"
set -g @catppuccin_status_fill "all"
set -g @catppuccin_status_module_bg_color "#{@thm_surface_0}"
set -g @catppuccin_status_left_separator " "
set -g @catppuccin_status_middle_separator ""
# Uncomment and customize the status right separator if needed
set -g @catppuccin_status_right_separator " "

### Module specific config

# Session
set -g @catppuccin_session_icon " "

# Command
set -g @catppuccin_status_ctp_command_icon_bg "#{@thm_blue}"
set -g @catppuccin_status_ctp_command_text_bg "#{@thm_blue}"
set -g @catppuccin_status_ctp_command_icon_fg "#{@thm_crust}"
set -g @catppuccin_status_ctp_command_text_fg "#{@thm_crust}"

# Online status
set -g @online_icon "ok"
set -g @offline_icon "nok"
set -g @catppuccin_status_ctp_online_status_text_fg "#{@thm_crust}"

# CPU settings
set -g @cpu_low_bg_color "#[bg=#{@thm_green}]" # background color when CPU is low
set -g @cpu_medium_bg_color "#[bg=#{@thm_yellow}]" # background color when CPU is medium
set -g @cpu_high_bg_color "#[bg=#{@thm_red}]" # background color when CPU is high

# RAM settings
set -gq '@ram_low_bg_color' '#{E:@thm_green}'
set -gq '@ram_medium_bg_color' '#{E:@thm_yellow}'
set -gq '@ram_high_bg_color' '#{E:@thm_red}'

# Primary IP
set -g @catppuccin_status_ctp_primary_ip_icon_bg "#{@thm_peach}"
set -g @catppuccin_status_ctp_primary_ip_text_bg "#{@thm_peach}"
set -g @catppuccin_status_ctp_primary_ip_icon_fg "#{@thm_crust}"
set -g @catppuccin_status_ctp_primary_ip_text_fg "#{@thm_crust}"

# Weather settings
set -g @clima_ttl '10'
set -g @clima_unit 'metric'
set -g @clima_show_location 1
set -g @clima_location "Imperia"
set -g @clima_show_icon 1
set -g @clima_use_nerd_font 1
set -g @catppuccin_status_ctp_clima_icon "󰔐"
set -g @catppuccin_status_ctp_clima_icon_bg "#{@thm_blue}"
set -g @catppuccin_status_ctp_clima_text_bg "#{@thm_blue}"
set -g @catppuccin_status_ctp_clima_icon_fg "#{@thm_crust}"
set -g @catppuccin_status_ctp_clima_text_fg "#{@thm_crust}"
set -g @tmux-weather-format "%l:+%t+%c"
set -g @tmux-weather-units "m"
set -g @tmux-weather-location "Imperia"
set -g @catppuccin_weather_text "#{l:#{weather}}"
set -g @catppuccin_weather_icon_bg "#{@thm_blue}"
set -g @catppuccin_weather_text_bg "#{@thm_blue}"
set -g @catppuccin_weather_icon_fg "#{@thm_crust}"
set -g @catppuccin_weather_text_fg "#{@thm_crust}"

# Date and time settings
set -g @catppuccin_date_time_text " %Y-%m-%d %H:%M:%S#[reverse]"
# Uncomment and customize the date and time text if needed
set -g @catppuccin_status_date_time_icon_bg "#{@thm_lavender}"
set -g @catppuccin_status_date_time_text_bg "#{@thm_lavender}"
set -g @catppuccin_status_date_time_icon_fg "#{@thm_crust}"
set -g @catppuccin_status_date_time_text_fg "#{@thm_crust}"

# Uptime settings
set -g @catppuccin_status_uptime_icon_bg "#{@thm_maroon}"
set -g @catppuccin_status_uptime_text_bg "#{@thm_maroon}"
set -g @catppuccin_status_uptime_icon_fg "#{@thm_crust}"
set -g @catppuccin_status_uptime_text_fg "#{@thm_crust}"

# Battery settings
set -g @catppuccin_status_battery_icon_bg "#{@thm_rosewater}"
set -g @catppuccin_status_battery_text_bg "#{@thm_rosewater}"
set -g @catppuccin_status_battery_icon_fg "#{@thm_crust}"
set -g @catppuccin_status_battery_text_fg "#{@thm_crust}"

# Custom modules path
set-environment -gF TMUX_CUSTOM_MODULES_PATH '#{HOME}/.config/tmux/custom_modules'
run '#{TMUX_PLUGIN_MANAGER_PATH}/tmux/catppuccin.tmux'

# Load custom modules
source -F '#{TMUX_CUSTOM_MODULES_PATH}/ctp_command.conf'
source -F '#{TMUX_CUSTOM_MODULES_PATH}/ctp_clima.conf'
source -F '#{TMUX_CUSTOM_MODULES_PATH}/ctp_cpu.conf'
source -F '#{TMUX_CUSTOM_MODULES_PATH}/ctp_gitmux.conf'
source -F '#{TMUX_CUSTOM_MODULES_PATH}/ctp_memory.conf'
source -F '#{TMUX_CUSTOM_MODULES_PATH}/ctp_online_status.conf'
source -F '#{TMUX_CUSTOM_MODULES_PATH}/ctp_primary_ip.conf'

# Status line settings
set -g status-left-length 100
set -g status-left ""
set -g status-left "#{?client_prefix,#{#[bg=#{@thm_red},fg=#{@thm_crust},bold]  #S | PREFIX#[reverse]#[noreverse]},#{#[bg=#{@thm_green},fg=#{@thm_crust}]  #S#[reverse]#[noreverse]}}"
if 'test -d #{pane_current_path}/.git' {
    set -ag status-left "#[bg=#{@thm_surface_0}]#[reverse] #[noreverse]"
    set -ag status-left "#[bg=#{@thm_surface_0},fg=#{@thm_green}]󰊢"
    set -ag status-left "#[bg=#{@thm_surface_0}] #(gitmux -cfg $HOME/.gitmux.conf '#{pane_current_path}')"
    set -ag status-left "#[bg=#{@thm_surface_0},fg=#{@thm_crust}]#[reverse] #[noreverse]"
}
set -g status-right-length 250
set -g status-right ""
set -g status-right "#[fg=#{@thm_crust},bg=#{cpu_bg_color}]#[reverse]#[noreverse]"
set -ag status-right "#[fg=#{@thm_crust},bg=#{cpu_bg_color}]  #{cpu_percentage} "
set -ag status-right "#[fg=#{@thm_crust},bg=#{ram_bg_color}]   #{ram_percentage}"
set -ag status-right "#[fg=#{@thm_crust},bg=#{ram_bg_color}]#[reverse] #[noreverse]"
set -ag status-right "#[bg=#{@thm_surface_0}]#[reverse]#[noreverse]"
set -ag status-right "#[bg=#{@thm_surface_0}]󰊚"
set -ag status-right "#[bg=#{@thm_surface_0}] #{load_full}"
set -ag status-right "#[bg=#{@thm_surface_0}]#[reverse]#[noreverse]"
set -ag status-right "#[bg=#{@thm_peach},fg=#{@thm_crust}]#[reverse] #[noreverse]"
set -ag status-right "#[bg=#{@thm_peach}]#{?#{==:#{online_status},ok},#[fg=#{@thm_crust}] 󰖩 on | #{primary_ip},#[fg=#{@thm_red},bold]#[reverse] 󰖪 off}"
set -ag status-right "#[bg=#{@thm_peach}]#[reverse]#[noreverse]"
set -ag status-right "#[bg=#{@thm_blue},fg=#{@thm_crust}]#[reverse] #[noreverse]"
set -ag status-right "#[bg=#{@thm_blue},fg=#{@thm_crust}] #{clima}"
set -ag status-right "#[bg=#{@thm_blue}]#[reverse]#[noreverse]"
set -ag status-right "#[bg=#{@thm_maroon},fg=#{@thm_crust}]#[reverse] #[noreverse]"
set -ag status-right "#[bg=#{@thm_maroon}]󰔟"
set -ag status-right "#[bg=#{@thm_maroon},fg=#{@thm_crust}] #(uptime | sed 's/^[^,]*up *//; s/, *[[:digit:]]* user.*//; s/ day.*, */d /; s/:/h /; s/ min//; s/$/m/')"
set -ag status-right "#[bg=#{@thm_maroon}]#[reverse]#[noreverse]"
set -agF status-right "#{E:@catppuccin_status_date_time}"
if 'test -r /sys/class/power_supply/BAT*' {
    set -ag status-right "#{?#{e|>=:20,#{battery_percentage}},#{#[bg=#{@thm_red},fg=#{@thm_crust}]},#{#[bg=#{@thm_green},fg=#{@thm_crust}]}}#[reverse]#[noreverse]#{battery_icon} #{battery_percentage}#[reverse]#[noreverse]"
}
